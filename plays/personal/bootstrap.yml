
#   install generic minimal user and environment for server
#   eg. ansible-playbook plays/personal/bootstrap.yml -i parity, -u admin -s
#   use meteo-sudo.yml to add sudo and passwd. cannot be made generic, since group membership may be different
#   keep sshd separate - because that makes it a server which we don't always want

# assumes have ssh keys in root. or else can ask password. install root keys should be a manual action anyway.

- hosts: all
  vars_files:
    - ../../credentials.yml
  vars:

  roles:
    # - name: admin/hostname
    # - name: admin/timezone

    - name: admin/locale

    - name: admin/devenv-lite

    - name: admin/sshd
    # - name: admin/fail2ban-sshd   not generic enough for servers


    - name: admin/user
      username: me
      path: /home/me
      mode: 0700

    - name: personal/dotfiles
      tags: root_dotfiles
      path: /root
      user: root

    - name: personal/dotfiles
      tags: dotfiles
      path: /home/me
      user: me

    - name: personal/pathogen
      tags: pathogen
      path: /home/me
      user: me

