# eg.
# psql -h postgres.localnet -U admin -d postgres

# OK... I think the role to add postgres

- hosts:
    - postgres.localnet
  vars_files:
    - "{{inventory_dir | dirname}}/credentials.yml"

  roles:
    # NOTE assumes AU locale or not?
    - postgres-apt
    - postgres

  tasks:
    - shell: creates=/ansible/postgres-done.txt chdir=/root {{item}}
      with_items:
        - sudo -u postgres psql -c "create user admin password 'admin'"
        - sudo -u postgres psql -c "alter user admin with superuser"
        - touch /ansible/postgres-done.txt

  # should use, 'become', 'become_method', and 'become_user
