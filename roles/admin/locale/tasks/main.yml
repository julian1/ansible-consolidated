

  - apt: name=locales

  # is this even needed? Yes..
  - copy:
      dest: /etc/default/locale 
      mode: 0644
      content: |
        # deployed by ansible
        #  File generated by update-locale
        LANG={{locale}}

    # notify: reconfigure-locales
    register: last_result



  - name: reconfigure-locales
    command: "{{item}}"
    with_items:
      - locale-gen {{locale}} && update-locale
      # - dpkg-reconfigure --frontend noninteractive locales
      # - locale 
      #
    when: last_result.changed




# IMPORTANT 
# calling *both* 
#  - locale-gen {{locale}} && update-locale
# will update  /etc/locale.gen 
# and add the  en_AU.UTF-8 UTF-8 entry
#

# IMPORTANT
# must su after calling bash in docker.
# because docker likes to take control of ENV

